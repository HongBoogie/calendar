## 실행 방법

> 배포했기에 우측 URL을 통해 접근 가능합니다. 개발 모드로 사용하시려면 npm i & npm run dev 부탁드려요.

## 기능 설명

### 테마 전환

<img width="1440" alt="스크린샷 2025-01-13 오후 7 04 20" src="https://github.com/user-attachments/assets/7896415b-a914-4f45-aaae-bf30f70e8fc7" />

우측 상단의 테마 컨트롤러를 통해 라이트 모드 / 다크 모드를 전환할 수 있습니다.

### 일정 추가

상단의 + 버튼을 통해 일정 추가가 가능합니다. **제목, 날짜, 시작 시간, 종료 시간, 설명** 등의 데이터를 필요로 하고, 날짜와 제목 외에는 생략이 가능합니다.

<img width="1440" alt="스크린샷 2025-01-12 오후 9 27 12" src="https://github.com/user-attachments/assets/769f116e-d798-4c98-963e-32fd30b86e51" />

### 일정 조회, 삭제, 수정

<img width="658" alt="스크린샷 2025-01-13 오후 7 05 36" src="https://github.com/user-attachments/assets/df54ca1f-c067-4e31-b90c-749280d7b11d" />

추가된 일정을 누르게 되면 상세 정보 모달이 뜨는데, 우측 버튼을 통해 삭제와 수정이 가능합니다. 일정이 여러개라면 화살표를 눌러 다른 일정으로 전환할 수도 있습니다.

<br />

<img width="1440" alt="스크린샷 2025-01-12 오후 9 30 14" src="https://github.com/user-attachments/assets/3b94f22f-e8cb-46c8-8e74-70df9205d331" />

수정을 누르게 되면 수정 모달이 뜨는데, 취소하게 되면 하위 레이어에 존재하던 기존 상세 정보 모달이, 수정하게 되면 메인 화면으로 돌아갑니다.

## 구현 과정 & 트러블 슈팅

서버를 구현할까 싶었지만 다음과 같은 이유로 **클라이언트 Only**로 하기로 했습니다.

1. 일주일이라는 시간안에 스프링 부트까지 학습하면서 퀄리티를 잡기는 힘들다고 판단헸습니다.
2. 서버를 붙일 수는 있지만, LocalStorage만을 이용하는 것도 괜찮다고 생각이 들었습니다.

### 폴더 구조

FSD를 채택해도 좋지만, 소규모 플젝에선 오히려 독이 된다는 느낌이라 각 기능에 따라 폴더 구조를 채택하였습니다.

### 레이아웃 구축

기본적인 레이아웃은 **Header, Sidebar, Main**으로 나뉩니다.
Main 부분만 갈아끼워주는 형태로 구현하였습니다.

### useCalendar 훅 구현

개인적으로 신경을 가장 많이 썼고 수정도 많이 거친 훅인데, 캘린더를 처음 구현해보다보니 신경쓸 점이 굉장히 많았습니다. 라이브러리를 사용해서 구현한 적은 있지만 쌩으로 구현하려니 머리가 아팠습니다.

신경써야 했던 건

1. 어떻게 이번달이 아닌 달을 음영처리 할 것인가?
2. 공휴일은 어떻게 표현하지?
3. 일정을 어떻게 UI적으로 표현할 것인가?

등등이 고민이었는데,
찾아보니 **date-fns** 를 사용해서 많이 구현하는 것 같았고, 저도 이를 통해 string 형태를 파싱하면서 구현하면 되리란 생각이 들었습니다.

### 상태 관리

일정을 등록해주려면 서버를 쓰거나, 전역 상태를 쓰거나 해야 했는데, 나는 전역 상태 + LocalStorage로 데이터의 영속성을 보장하고자 했습니다.

전역 상태 관리 라이브러리는 Recoil, Zustand 중에 고민했지만, Zustand를 쓰기로 했습니다. Recoil은 메모리 누수, 메인 엔지니어 해고 (...) 등의 문제로 미래가 불투명했기에 대세인 Zustand가 좋겠다 싶었습니다.

전역 상태 주입은 Context API를 적극적으로 사용했습니다.

미들웨어를 통해 Localstorage에 저장 및 참조를 하게 구현하였고, CRUD 기능을 구현하였습니다.

### 모달

모달을 띄우기 위해 **GlobalPortal** 을 구현하였습니다. 부스트캠프 활동을 하면서 배운 팁인데, Portal을 통해 Modal 뼈대를 구현해놓으면 굉장히 재사용성이 높습니다 (비슷한 로직으로 Toast도 구현하면 괜찮았음). 그 후 Modal을 활용해 일정 추가 모달, 일정 상세 모달, 일정 수정 모달을 구현했습니다. 디자인은 좀 손봐야 할듯 싶습니다.

## 트러블 슈팅

### hydration 에러

SSR 과정에서 localStorage를 참조해서 일어난 문제였습니다. 마주치자 마자 그럴거라 생각했고, schedulesByDay 상태를 추가하여 모든 일정 데이터를 클라이언트 사이드에서만 관리하도록 하여 해결하였습니다.

### 리렌더링 문제

일정을 삭제하고 리렌더링이 일어나지 않는 문제가 발생했습니다. 리액트의 렌더링 조건을 충족시키지 못했다고 생각하였고, schedules 파라미터를 useEffect의 의존성 배열에 추가하는 것으로 schedulesByDay가 업데이트되어 화면을 리렌더링시키는 방식으로 해결할 수 있었습니다.

### 일정 수정시 모달 중첩되는 문제

일정을 수정할 경우 하위에 있던 모달에 수정되지 않는 상태로 존재하는 문제가 있었는데, 수정시에 하위 모달을 닫는 함수를 props로 받아 **수정 모달이 닫히기 전에** 우선적으로 닫아줌으로써 해결할 수 있었습니다.
